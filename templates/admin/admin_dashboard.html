{% extends "base.html" %}

{% block page_title %}Admin Dashboard{% endblock %}
{% block page_desc %}Admin overview{% endblock %}

{% block content %}

<style>
  /* ===== Dashboard Cards ===== */
  .kpi-card {
    border-radius: 14px;
    border: 0;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    padding: 1.2rem;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .kpi-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 30px rgba(0,0,0,0.12);
  }

  .kpi-card h6 {
    font-size: 0.9rem;
    font-weight: 700;
    color: #6b7280;
    margin-bottom: 8px;
  }

  .kpi-card h3 {
    font-size: 2rem;
    font-weight: 800;
    color: #1e3a8a;
  }

  /* ===== Action Buttons ===== */
  .action-btns .btn {
    border-radius: 12px;
    padding: 10px 16px;
    font-weight: 600;
    letter-spacing: 0.2px;
  }

  .btn-primary {
    background: var(--blue);
    border: 0;
  }

  .btn-danger {
    background: var(--red);
    border: 0;
  }

  .btn-success {
    background: #16a34a;
    border: 0;
  }

  .btn-secondary {
    background: #6b7280;
    border: 0;
  }

  /* ===== Table ===== */
  .table {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 10px 20px rgba(0,0,0,0.05);
  }

  .table thead th {
    background: var(--blue);
    color: #fff;
    border: 0;
    font-weight: 700;
  }

  .table-striped tbody tr:nth-of-type(odd) {
    background: #f1f5ff;
  }

  .table-striped tbody tr:hover {
    background: #e0f2fe;
  }

  .table td, .table th {
    vertical-align: middle;
    border-top: 0;
  }

  /* ===== Responsive ===== */
  @media (max-width: 768px) {
    .kpi-card h3 {
      font-size: 1.6rem;
    }
  }
</style>

<div class="row g-3 mb-4">
  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Total Projects</h6>
      <h3>{{ total_projects }}</h3>
    </div>
  </div>

  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Total Baranggay</h6>
      <h3>{{ total_baranggay }}</h3>
    </div>
  </div>

  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Total Budget</h6>
      <h3>₱{{ total_budget }}</h3>
    </div>
  </div>

  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Budget Utilized</h6>
      <h3>₱{{ budget_utilized }}</h3>
    </div>
  </div>
</div>

<div class="row g-3 mb-4">
  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Completed Projects</h6>
      <h3>{{ completed_projects }}</h3>
    </div>
  </div>

  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Ongoing Projects</h6>
      <h3>{{ ongoing_projects }}</h3>
    </div>
  </div>

  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Total Users</h6>
      <h3>{{ total_users }}</h3>
    </div>
  </div>

  <div class="col-md-3">
    <div class="kpi-card">
      <h6>Upcoming Projects</h6>
      <h3>{{ upcoming_projects }}</h3>
    </div>
  </div>
</div>

<div class="mb-4 action-btns">
  <a href="/projects/add" class="btn btn-primary me-2">
    <i class="bi bi-plus-lg"></i> Add Project
  </a>

  <a href="/budgets/add" class="btn btn-danger me-2">
    <i class="bi bi-wallet2"></i> Add Budget
  </a>

  <a href="/users/add" class="btn btn-success me-2">
    <i class="bi bi-person-plus-fill"></i> Add User
  </a>

  <a href="/reports" class="btn btn-secondary">
    <i class="bi bi-file-earmark-text"></i> Generate Report
  </a>
</div>

<div class="card">
  <div class="card-header">
    <h5>Recently Added Projects</h5>
  </div>
  <div class="card-body table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Title</th>
          <th>Status</th>
          <th>Baranggay</th>
          <th>Timeline</th>
          <th>Budget</th>
        </tr>
      </thead>
      <tbody>
        {% for project in projects %}
        <tr>
          <td>{{ project.title }}</td>
          <td>{{ project.status }}</td>
          <td>{{ project.brgy }}</td>
          <td>{{ project.start_date }} - {{ project.end_date }}</td>
          <td>₱{{ project.budget }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
